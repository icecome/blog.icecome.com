import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,b as t,e as o,o as i}from"./app-TChdOyIt.js";const g={};function a(c,e){return i(),r("div",null,[e[0]||(e[0]=t('<br><h1 id="前序" tabindex="-1"><a class="header-anchor" href="#前序"><span>前序</span></a></h1><p>过去的几年里，一直在使用 <strong>M365 E5</strong> 开发者订阅 <strong>OneDrive</strong> 作为自己存储数据的网盘，毕竟相对于其他人各种重要的数据，我并没有什么值得保存的。（或许那些女菩萨也算？）</p><p>去年年中的时候，新配了一台主机，当时就所有考虑，选择了一个可以加装不少额外硬盘的机箱。加之最近对 <strong>NAS</strong> 有所感兴趣，所以购买了一块大容量的硬盘。</p><p>但，不论是网盘还是 <strong>NAS</strong>，都是存在各种各样的风险。比如 <strong>E5</strong> 订阅，前几个月开始大规模的封锁。我本人的一个账号已经挂了。再比如 <strong>NAS</strong>，也难免出现硬盘损坏等问题。</p><p>因此，为了防止这种事情发生，势必要对数据进行多重备份。</p><p>这里，我就简单的将 <strong>TrueNAS</strong> 与 <strong>OneDrive for Business</strong> 之间的备份操作说一说，以备记忆和分享。</p>',7)),o(" more "),e[1]||(e[1]=t('<blockquote><p>2024 年 8 月 28 日更新，由于前一段时间升级到了 <strong>SCAlE 24.04</strong>，发现凭据中，<strong>OneDrive</strong> 的选项已经被删除了，所以此备份方式已经失效。且使用过程中，体验不太好，也不建议再使用此方式备份。</p></blockquote><h2 id="添加备份凭据" tabindex="-1"><a class="header-anchor" href="#添加备份凭据"><span>添加备份凭据</span></a></h2><blockquote><p>由于我自己是拥有 <strong>M365 E5</strong> 开发者订阅的账户，所以对于其他订阅的人来说可略微参考。</p></blockquote><p>登录到 <strong>TrueNAS</strong> 后，选择左侧的证书&gt;备份凭据，</p><figure><img src="https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_114105.png" alt="20240426_114105" tabindex="0" loading="lazy"><figcaption>20240426_114105</figcaption></figure><p>点击云凭据的添加，输入一个凭据名称，并选择提供服务商，<strong>Microsoft OneDrive</strong>，然后直接登录，再弹出的窗口中点击 <strong>Proceed</strong>，随后登录微软账户。这里直接按照它的步骤选项一步步走即可，登录微软账户后，客户端 ID/秘密/访问令牌，自动填充。</p><figure><img src="https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_114257.png" alt="20240426_114257" tabindex="0" loading="lazy"><figcaption>20240426_114257</figcaption></figure><p>值得注意的是，此处驱动器账户选择 <strong>BUSINESS</strong>，</p><figure><img src="https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_114554.png" alt="20240426_114554" tabindex="0" loading="lazy"><figcaption>20240426_114554</figcaption></figure><p>然后浏览器切换到 <strong>OneDrive</strong> 的网页端，点击 <strong>F12</strong>，在调试器网络模块中，查找 <code>token</code>，并选择 <code>socket.io</code> 开头的字符串，将图中斜杠后打码并划线的字符串参数复制到 <strong>TrueNAS</strong> 的驱动器 ID 这个位置。</p><figure><img src="https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_115437.png" alt="20240426_115437" tabindex="0" loading="lazy"><figcaption>20240426_115437</figcaption></figure><p>这里解释一下，在云凭据添加窗口，点按驱动器列表，会显示一个名为 <strong>LIBRARY</strong> 的驱动器，如果选择此驱动器会自动生成驱动器 ID。但是我的试验的时候发现，生成的驱动器 ID，关联的是我的 <strong>OneDrive SharePoint</strong> 的空间，与我想同步的位置不相同。所以，此处需要手动查找驱动器 ID 并添加。</p><h2 id="添加云同步任务" tabindex="-1"><a class="header-anchor" href="#添加云同步任务"><span>添加云同步任务</span></a></h2><p>在添加完凭据后，找到数据保护，在 <strong>Cloud Sync Tasks</strong> 中点击添加，</p><figure><img src="https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_120928.png" alt="20240426_120928" tabindex="0" loading="lazy"><figcaption>20240426_120928</figcaption></figure><p>描述随便填写一个作为任务名称即可，凭据选择刚才我们添加的备份凭据，方向按照我们的需要进行选择，如果希望将云端数据同步到本地选择拉取，如果希望备份本地文件到云端选择推送。</p><p>文件夹选项是云端进行存储备份文件的目录，点击下面的箭头进行选择会从 <strong>OneDrive</strong> 中同步云端的文件结构，我们可以先去 <strong>OneDrive</strong> 中创建一个文件夹进行选择，也可以直接填写一个文件夹名进去。</p><p>传输模式可以选择复制、迁移和同步。根据介绍，同步为本地在推送或拉取中，与云端保持一致。因为推送和拉取是单线操作，所以并不会双向同步，且在实际操作中发现，不会因为云端的数据比本地更新而保持最新状态，只会死板的保持一致，遇到重复文件既覆盖。我因为后面要选择加密，因此只进行复制。迁移的话会把本地删除而并非进行备份，因此不要选。</p><p>目录/文件则是选择本地需要备份到云端的目录，可以选 <code>/mnt</code> 将整个本地文件进行备份，也可以选择下属具体的目录，我自己的同步任务则是只选择了 <strong>NAS</strong> 文件的数据集位置。</p><p>下滑，下面有一个远程加密的选项，建议勾选远程加密和文件名加密可以保证云端无法访问到具体的数据。下面的密码和盐随便填一个然后记住即可。</p><p><strong>Schedule</strong> 是备份定时，用的是 <code>corn</code> 语法，可以进行自定义。</p><p>全部结束后选择保存。</p><figure><img src="https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_121814.png" alt="20240426_121814" tabindex="0" loading="lazy"><figcaption>20240426_121814</figcaption></figure><p>此时，就可以在 <strong>Cloud Sync Tasks</strong> 中找到刚添加的同步任务了，可以等待定时任务触发，也可以点击右边的开始按钮手动触发。</p><figure><img src="https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_122209.png" alt="20240426_122209" tabindex="0" loading="lazy"><figcaption>20240426_122209</figcaption></figure><p>至此，备份同步工作就完成了。如果出现数据损坏的情况，我们只需要替换掉硬盘重建完阵列后，点击这里的恢复按钮即可。</p>',26))])}const m=n(g,[["render",a],["__file","TrueNAS云同步.html.vue"]]),l=JSON.parse('{"path":"/learn/play/nas/TrueNAS%E4%BA%91%E5%90%8C%E6%AD%A5.html","title":"在 True NAS SCAlE 中使用云同步任务同步 OneDrive","lang":"zh-CN","frontmatter":{"title":"在 True NAS SCAlE 中使用云同步任务同步 OneDrive","date":"2024-04-26T14:34:39.000Z","author":"都将焉予","cover":null,"icon":"cbi:truenas-logo","order":-2,"category":["学习"],"tags":["动手实践","NAS"],"toc":true,"article":true,"star":false,"sticky":false,"editLink":false,"pageview":false,"lastUpdated":false,"description":"前序 过去的几年里，一直在使用 M365 E5 开发者订阅 OneDrive 作为自己存储数据的网盘，毕竟相对于其他人各种重要的数据，我并没有什么值得保存的。（或许那些女菩萨也算？） 去年年中的时候，新配了一台主机，当时就所有考虑，选择了一个可以加装不少额外硬盘的机箱。加之最近对 NAS 有所感兴趣，所以购买了一块大容量的硬盘。 但，不论是网盘还是 N...","head":[["meta",{"property":"og:url","content":"https://blog.icecome.com/learn/play/nas/TrueNAS%E4%BA%91%E5%90%8C%E6%AD%A5.html"}],["meta",{"property":"og:site_name","content":"三无亦拾吾"}],["meta",{"property":"og:title","content":"在 True NAS SCAlE 中使用云同步任务同步 OneDrive"}],["meta",{"property":"og:description","content":"前序 过去的几年里，一直在使用 M365 E5 开发者订阅 OneDrive 作为自己存储数据的网盘，毕竟相对于其他人各种重要的数据，我并没有什么值得保存的。（或许那些女菩萨也算？） 去年年中的时候，新配了一台主机，当时就所有考虑，选择了一个可以加装不少额外硬盘的机箱。加之最近对 NAS 有所感兴趣，所以购买了一块大容量的硬盘。 但，不论是网盘还是 N..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_114105.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-09T07:43:26.000Z"}],["meta",{"property":"article:author","content":"都将焉予"}],["meta",{"property":"article:tag","content":"动手实践"}],["meta",{"property":"article:tag","content":"NAS"}],["meta",{"property":"article:published_time","content":"2024-04-26T14:34:39.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-09T07:43:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"在 True NAS SCAlE 中使用云同步任务同步 OneDrive\\",\\"image\\":[\\"https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_114105.png\\",\\"https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_114257.png\\",\\"https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_114554.png\\",\\"https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_115437.png\\",\\"https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_120928.png\\",\\"https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_121814.png\\",\\"https://img-cdn.icecome.com/image/在TrueNASSCAlE中使用云同步任务同步OneDrive/20240426_122209.png\\"],\\"datePublished\\":\\"2024-04-26T14:34:39.000Z\\",\\"dateModified\\":\\"2024-10-09T07:43:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"都将焉予\\"}]}"]]},"headers":[{"level":2,"title":"添加备份凭据","slug":"添加备份凭据","link":"#添加备份凭据","children":[]},{"level":2,"title":"添加云同步任务","slug":"添加云同步任务","link":"#添加云同步任务","children":[]}],"git":{"createdTime":1728459806000,"updatedTime":1728459806000,"contributors":[{"name":"icecome","email":"werrice@outlook.com","commits":1}]},"readingTime":{"minutes":4.75,"words":1425},"filePathRelative":"learn/play/nas/TrueNAS云同步.md","localizedDate":"2024年4月26日","excerpt":"<br>\\n<h1>前序</h1>\\n<p>过去的几年里，一直在使用 <strong>M365 E5</strong> 开发者订阅 <strong>OneDrive</strong> 作为自己存储数据的网盘，毕竟相对于其他人各种重要的数据，我并没有什么值得保存的。（或许那些女菩萨也算？）</p>\\n<p>去年年中的时候，新配了一台主机，当时就所有考虑，选择了一个可以加装不少额外硬盘的机箱。加之最近对 <strong>NAS</strong> 有所感兴趣，所以购买了一块大容量的硬盘。</p>\\n<p>但，不论是网盘还是 <strong>NAS</strong>，都是存在各种各样的风险。比如 <strong>E5</strong> 订阅，前几个月开始大规模的封锁。我本人的一个账号已经挂了。再比如 <strong>NAS</strong>，也难免出现硬盘损坏等问题。</p>\\n<p>因此，为了防止这种事情发生，势必要对数据进行多重备份。</p>\\n<p>这里，我就简单的将 <strong>TrueNAS</strong> 与 <strong>OneDrive for Business</strong> 之间的备份操作说一说，以备记忆和分享。</p>\\n","autoDesc":true}');export{m as comp,l as data};
