import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a as n,f as a,e as r,b as l,o as p}from"./app-TChdOyIt.js";const t={};function o(d,s){return p(),i("div",null,[s[0]||(s[0]=n("br",null,null,-1)),s[1]||(s[1]=n("h1",{id:"前序",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#前序"},[n("span",null,"前序")])],-1)),s[2]||(s[2]=n("p",null,[a("自从建了这个主页，一直没想好写什么东西，正巧碰上远程连接软件 "),n("strong",null,"Team Viewer"),a(" 无法使用的情况， 在对比了多个远程连接软件后，选择了 "),n("strong",null,"Frp"),a(" 作为解决我目前困境的一个方式的同时，也想记录下本次搭建的过程。")],-1)),r(" more "),s[3]||(s[3]=l(`<p>Frp 全名：Fast Reverse Proxy，是一个可用于内网穿透的高性能的反向代理应用，支持 TCP, UDP, HTTP, HTTPS 协议。可以利用 Frp 内网穿透服务实现穿透处于内网或防火墙后的设备及主机；对外网环境提供 HTTP 或 HTTPS 服务；利用处于内网或防火墙后的机器，对外网环境提供 TCP/UDP 服务等。</p><p>比如我这次的搭建 Frp 服务的主要目的就是通过 <strong>Frp</strong> + <strong>RDP</strong> 访问处于公司内网环境内的主机，达到远程办公的目的。</p><blockquote><p>这里不得不提一句，<strong><em>Team Viewer</em></strong> 其实是一个很好用的远程软件，但是不知道为什么从 6 月开始突然大手笔的封杀了免费版，让我这个日常白嫖党，不禁有些措手不及。在尝试其他多款软件后，始终感觉效果不怎么样，于是，有了这次的实践。</p></blockquote><h1 id="frp-的作用" tabindex="-1"><a class="header-anchor" href="#frp-的作用"><span><strong>Frp 的作用</strong></span></a></h1><ul><li>利用处于内网或防火墙后的机器，对外网环境提供 <strong>HTTP</strong> 或 <strong>HTTPS</strong> 服务。</li><li>对于 <strong>HTTP</strong>, <strong>HTTPS</strong> 服务支持基于域名的虚拟主机，支持自定义域名绑定，使多个域名可以共用一个 80 端口。</li><li>利用处于内网或防火墙后的机器，对外网环境提供 TCP 和 UDP 服务，例如在家里通过 RDP/SSH 访问处于公司内网环境内的主机。</li></ul><h1 id="搭建过程" tabindex="-1"><a class="header-anchor" href="#搭建过程"><span><strong>搭建过程</strong></span></a></h1><blockquote><p>😝😝 终于开始了，上面讲了好多我自己都看不懂的废话。不过，例行介绍还是有必要的。</p></blockquote><p>首先，介绍一下我安装 Frp 的 VPS 及配置，服务器是 GCP 的香港节点，f1 配置，1v CPU 和 0.5 G 内存。经过多次尝试，IP 段为 <strong><em>34.96.x.x</em></strong> ，在我这个小城市的联通延迟还是不错的，ping 大概维持在 70s-90s 上下。系统上我选择的是 Ubuntu 18.04 版本。</p><h2 id="服务器端" tabindex="-1"><a class="header-anchor" href="#服务器端"><span><strong>服务器端</strong></span></a></h2><h3 id="_1-下载程序" tabindex="-1"><a class="header-anchor" href="#_1-下载程序"><span><strong>1.下载程序</strong></span></a></h3><p>前往 Frp 的 <strong>Github releases</strong> 页面下载最新版的、对应你的 VPS 的处理器架构的包，地址：<a href="https://github.com/fatedier/Frp/releases" target="_blank" rel="noopener noreferrer"><strong>Frp 内网穿透</strong></a> 。</p><p>其实目前大多数 VPS 主机商都是使用的 <strong>arm64</strong> 架构，所以下载时直接选择对应此架构的版本就可以。当然，如果不放心，也可以运行以下命令，查看一下你的 VPS 处理器架构：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>arch</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果输出 <strong>x86_64</strong> 那么就说明是 <strong>amd64</strong>，即需要下载带 <strong>linux_amd64</strong> 的那个压缩包；如果输出的是其他的，则在文件列表中寻找 <strong>linux</strong> 的对应架构的压缩包。记住，右键复制链接。</p><blockquote><p>本文便以 <strong><em>amd64</em></strong> 架构举例，截止我写文时， <strong><em>Frp</em></strong> 最新版是 <strong><em>v0.33.0</em></strong> 。</p></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>## 切换到你想要 Frp 存放的目录，此处我选择的是 /home</span></span>
<span class="line"><span>## 不要问我为什么，我不懂 Linux 目录结构 ，不知道这个目录的含义</span></span>
<span class="line"><span>## 选择它纯粹是因为我搭建的时候看的教程是选择这个目录，你也可以选择其他的目录。</span></span>
<span class="line"><span>cd /home</span></span>
<span class="line"><span>## 从 VPS 中下载 Frp 包</span></span>
<span class="line"><span>wget --no-check-certificate https://github.com/fatedier/Frp/releases/download/v0.33.0/frp_0.33.0_linux_amd64.tar.gz</span></span>
<span class="line"><span>## 解包</span></span>
<span class="line"><span>tar -xzf frp_0.33.0_linux_amd64.tar.gz</span></span>
<span class="line"><span>## 将文件夹名改成 Frp，不然目录太长了，一是记不住，二是也不方便操作</span></span>
<span class="line"><span>mv frp_0.33.0_linux_amd64 frp</span></span>
<span class="line"><span>## 切换到 Frp 目录</span></span>
<span class="line"><span>cd /frp</span></span>
<span class="line"><span>## 执行 chemod 命令，确保 Frps 程序具有可执行权限</span></span>
<span class="line"><span>chmod +x frps</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此处可以尝试运行一下，看看是否能正常运行：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>./frps -help</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>正常情况下，大概会出现一页的帮助文档信息，这里我就不截图或者 <strong>print</strong> 下来了，没多大必要，<s>当然不是我懒</s> 。倘若你没有出现帮助信息，那或许是你下载的版本不对。如果你真的按照我上面的的步骤一步一步下来的话，应该是没问题的，哼 🤔！</p><h4 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件"><span>配置文件</span></a></h4><table><thead><tr><th style="text-align:left;">文档名称</th><th style="text-align:left;">功能</th></tr></thead><tbody><tr><td style="text-align:left;">frpc</td><td style="text-align:left;">客户端程序</td></tr><tr><td style="text-align:left;">frpc.ini</td><td style="text-align:left;">客户端配置文件</td></tr><tr><td style="text-align:left;">frps</td><td style="text-align:left;">服务端程序</td></tr><tr><td style="text-align:left;">frps.ini</td><td style="text-align:left;">服务端配置文件</td></tr></tbody></table><p>理论上整个包中，只有这些文件是有用的。其他的 LICENSE 、frps_full.ini[完整版配置文件] 的基本用不到。</p><h3 id="_2-配置程序" tabindex="-1"><a class="header-anchor" href="#_2-配置程序"><span><strong>2.配置程序</strong></span></a></h3><p>你可以参考以下配置说明来书写配置文件 <strong>frps.ini</strong>，我觉得可以先在电脑上打一份草稿，先列举自己的需求。<br> 我这里列举了一些必要的、我用到的和你可能用到的配置，如果你想研究完整的配置说明可以看目录下的 <strong>frps_full.ini</strong> ，以及参考资料内的 <a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">Frp 官方中文文档</a> 。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>## 这是是表头，代表配置从这里开始</span></span>
<span class="line"><span>[common]</span></span>
<span class="line"><span>## frp 服务端端口（必须），默认是7000，可以自定义</span></span>
<span class="line"><span>bind_port = 7000</span></span>
<span class="line"><span>## frp 服务端密钥（必须），是服务端与客户端认证的密码</span></span>
<span class="line"><span>token = 123456789</span></span>
<span class="line"><span>## web 仪表盘端口，只有设置了才能使用仪表盘，一般默认就行</span></span>
<span class="line"><span>dashboard_port = 7500</span></span>
<span class="line"><span>## 访问仪表盘的用户名密码，如果不设置，则默认都是 admin</span></span>
<span class="line"><span>dashboard_user = admin</span></span>
<span class="line"><span>dashboard_pwd = admin</span></span>
<span class="line"><span>## 其实像我仅仅使用 TCP 穿透内网使用远程桌面的话，配置到此结束就可以了</span></span>
<span class="line"><span>## 如果你想要用 frp 穿透访问内网中的网站（例如路由器设置页面）</span></span>
<span class="line"><span>## 则必须要设置以下两个监听端口，不设置则不会开启这项功能</span></span>
<span class="line"><span>vhost_http_port = 8080</span></span>
<span class="line"><span>vhost_https_port = 443</span></span>
<span class="line"><span>## 假设此项设置为 example.com，客户端配置 http 时将 subdomain 设置为 frp</span></span>
<span class="line"><span>## 设定域名，将 frp.example.com 在你的域名解析商那里解析到你的主机 IP 地址</span></span>
<span class="line"><span>## 之后就可以使用此域名来访问你的客户端对应的 HTTP</span></span>
<span class="line"><span>subdomain_host = example.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>检查没有什么想要增删的后，将配置文件写入 <strong>frps.ini</strong> 就可以了。这里介绍两种方法，<br> （1）你可以使用 <strong>Vim</strong> 编辑器：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>sudo apt -y install vim</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>一路 <strong>Y</strong> 确认，成功后，</p><p>vim /home/frp/frps.ini<br> 进入编辑配置文件，按下 <strong><code>insert</code></strong> 键，进入编辑模式，将你的配置文件复制进去，检查无误后，按下 <strong><code>Esc</code></strong> 退出编辑模式，直接输入 <strong>:wq!</strong> 保存并退出。</p><figure><img src="https://img-cdn.icecome.com/image/frp/20240827_175633.png" alt="frps配置" tabindex="0" loading="lazy"><figcaption>frps配置</figcaption></figure><blockquote><p>2024.8.27，这里更新了一张图片。</p></blockquote><p>（2）使用 <strong>echo</strong> 命令，直接将 配置文件写入 <strong>frps.ini</strong> 文档中：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>sudo echo &quot;[common]</span></span>
<span class="line"><span>bind_port = 7000</span></span>
<span class="line"><span>token = 123456789</span></span>
<span class="line"><span>dashboard_port = 7500</span></span>
<span class="line"><span>dashboard_user = admin</span></span>
<span class="line"><span>dashboard_pwd = admin</span></span>
<span class="line"><span>vhost_http_port = 8080</span></span>
<span class="line"><span>vhost_https_port = 443</span></span>
<span class="line"><span>subdomain_host = example.com&quot; &gt; frps.ini</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>到此基本结束了，尝试启动一下 <strong>frps</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>## 使用 -c 参数指定配置文件</span></span>
<span class="line"><span>sudo ./frps -c frps.ini</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>仔细查看运行后的命令，出现绿色 <strong>success</strong> 字样，代表配置没有问题，可以正常使用了。此时，可以按下 <strong><code>Ctrl</code></strong> + **<code>c</code></p><h3 id="_3-后台运行和开机自启" tabindex="-1"><a class="header-anchor" href="#_3-后台运行和开机自启"><span><strong>3.后台运行和开机自启</strong></span></a></h3><h4 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h4><p>直接使用上面的命令运行是不行的，当断开 <strong>SSH</strong> 的时候，程序 <strong>frps</strong> 就会停止运行，因此可以使用 <strong>nohup</strong> 来使它在后台运行。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>sudo nohup /home/frp/frps -c /home/frp/frps.ini &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="停止" tabindex="-1"><a class="header-anchor" href="#停止"><span>停止</span></a></h4><p>停止就使用 <strong>pkill</strong> ，结束 <strong>frps</strong> 即可。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>sudo pkill frps</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="重启" tabindex="-1"><a class="header-anchor" href="#重启"><span>重启</span></a></h4><p>先停止，再启动。</p><h4 id="开机自启" tabindex="-1"><a class="header-anchor" href="#开机自启"><span>开机自启</span></a></h4><p>对比了网上多种开机自启的方式，我最终选择了 <strong>systemctl</strong> 来控制，因为很好用，而且还方便，当然，原理我并不清楚，能用就行。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>## 使用管理员权限编辑系统服务文件</span></span>
<span class="line"><span>sudo vim /lib/systemd/system/frps.service</span></span>
<span class="line"><span>#######启动分割线</span></span>
<span class="line"><span></span></span>
<span class="line"><span>##配置文件</span></span>
<span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=fraps service</span></span>
<span class="line"><span>After=network.target syslog.target</span></span>
<span class="line"><span>Wants=network.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=simple</span></span>
<span class="line"><span>#启动服务的命令（此处写我们刚才存放 frps 的目录，或者你自定义存放的目录）</span></span>
<span class="line"><span>ExecStart=/home/frp/frps -c /home/frp/frps.ini</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>那么，接下来就启动吧！</p><blockquote><ul><li>sudo systemctl start frps</li></ul></blockquote><p>再打开自启动。</p><blockquote><ul><li>sudo systemctl enable frps</li></ul></blockquote><h5 id="systemd常用命令" tabindex="-1"><a class="header-anchor" href="#systemd常用命令"><span>Systemd常用命令</span></a></h5><blockquote><ul><li>重启应用，<strong><em>sudo systemctl restart frps</em></strong></li><li>停止应用，<strong><em>sudo systemctl stop frps</em></strong></li><li>查看服务日志，<strong><em>sudo systemctl status frps</em></strong></li><li>设置开机启动，<strong><em>sudo systemctl enable frps</em></strong></li><li>自启配置文件有改动重新加载，<strong><em>systemctl daemon-reload</em></strong></li></ul></blockquote><h3 id="题外话" tabindex="-1"><a class="header-anchor" href="#题外话"><span>题外话</span></a></h3><p>使用 GCP 、阿里云、腾讯云等还需在安全组-入站规则内放开对应的端口，不然会出现客户端无法连接到服务端的情况。具体放开的方法见此：<a href="https://tools.miku.ac/o/search_help?q=YmFpZHUg5LqR5pyN5Yqh5Zmo5a6J5YWo57uE6K6-572u" target="_blank" rel="noopener noreferrer"><strong>云服务器安全组设置</strong></a>。</p><h2 id="客户端配置" tabindex="-1"><a class="header-anchor" href="#客户端配置"><span><strong>客户端配置</strong></span></a></h2><h3 id="_1-书写配置" tabindex="-1"><a class="header-anchor" href="#_1-书写配置"><span><strong>1.书写配置</strong></span></a></h3><h4 id="基本配置-这是整个配置文件的必须" tabindex="-1"><a class="header-anchor" href="#基本配置-这是整个配置文件的必须"><span>基本配置，这是整个配置文件的必须</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>## 这个配置的开头，不用管它什么意思，反正必须有</span></span>
<span class="line"><span>[common]</span></span>
<span class="line"><span>## frp 服务端的地址，可以是 IP 也可以是之前解析的域名</span></span>
<span class="line"><span>server_addr = frp.example.com</span></span>
<span class="line"><span>## 服务端设定的端口，即上面服务端配置中的  bind_port</span></span>
<span class="line"><span>server_port = 7000</span></span>
<span class="line"><span>## 服务端设定的密钥，即上面服务端配置中的  token</span></span>
<span class="line"><span>token = 123456789</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="tcp-udp" tabindex="-1"><a class="header-anchor" href="#tcp-udp"><span>TCP/UDP</span></a></h4><p>这里以远程桌面连接为例，</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>## 自定义的配置名称，格式为 “[名称]” ，放在开头</span></span>
<span class="line"><span>[RDP]</span></span>
<span class="line"><span>## 连接类型，填写 tcp 或 udp ,远程连接一般使用 tcp</span></span>
<span class="line"><span>type = tcp</span></span>
<span class="line"><span>## 本地ip，填你需要转发到的目的ip</span></span>
<span class="line"><span>## 如果是转发到frp客户端所在本机（比如远程主机）则填 127.0.0.1</span></span>
<span class="line"><span>##否则填对应机器的内网ip</span></span>
<span class="line"><span>local_ip = 127.0.0.1</span></span>
<span class="line"><span>## 需要转发的端口，比如远程连接的端口是 3389</span></span>
<span class="line"><span>local_port = 3389</span></span>
<span class="line"><span>## frp 服务端的远程监听端口，即你访问服务端的 remote_port 就相当于访问</span></span>
<span class="line"><span>## 客户端的 local_port ，如果填0则会随机分配一个端口</span></span>
<span class="line"><span>remote_port = 3390</span></span>
<span class="line"><span>## 是否加密客户端与服务端之间的通信，默认是 false</span></span>
<span class="line"><span>use_encryption = true</span></span>
<span class="line"><span>## 是否压缩客户端与服务端之间的通信，默认是 false</span></span>
<span class="line"><span>use_compression = true</span></span>
<span class="line"><span>## 压缩可以节省流量，但需要消耗 CPU 资源</span></span>
<span class="line"><span>## 加密自然也会消耗 CPU 资源，但是不大</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>鉴于我只是为了远程桌面连接而配置的 <strong>frp</strong> ，其他的我没有深入去了解，想了解的可以去<a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><strong>参考资料</strong></a>中自己学习。</p><h3 id="_2-合并配置" tabindex="-1"><a class="header-anchor" href="#_2-合并配置"><span><strong>2.合并配置</strong></span></a></h3><p>上面已经将基本我们需要的配置都写出来了，将二者合而为一，然后填写到 <strong>frpc.ini</strong> 配置文件中。看起来就是这样子的：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>[common]</span></span>
<span class="line"><span>server_addr = frp.example.com</span></span>
<span class="line"><span>server_port = 7000</span></span>
<span class="line"><span>token = 123456789</span></span>
<span class="line"><span>[RDP]</span></span>
<span class="line"><span>type = tcp</span></span>
<span class="line"><span>local_ip = 127.0.0.1</span></span>
<span class="line"><span>local_port = 3389</span></span>
<span class="line"><span>remote_port = 3390</span></span>
<span class="line"><span>use_encryption = true</span></span>
<span class="line"><span>use_compression = true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将下载的对应你的远程主机版本的 <strong>frpc</strong> 客户端文件，解压在一个方便的位置，例如我的存放位置在</p><blockquote><p>c:/frp</p></blockquote><p>在当前文件夹，按住 <strong><code>shfit</code></strong> + <strong><code>鼠标右键</code></strong> ，在出现的右键菜单中选择 <strong><code>从此处打开 PowerShell 窗口</code></strong> ，也有可能是 <strong><code>从此处打开 CMD 窗口</code></strong> ，亦或是 <strong><code>在终端中打开</code></strong>。总之选择一种，执行</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>./frpc -c frpc.ini</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果出现的是如下结果，则说明 frp 客户端启动成功。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#222222;color:#E6E6E6;"><pre class="shiki slack-dark vp-code"><code><span class="line"><span>PS C:\\frp&gt; ./frpc -c frpc.ini</span></span>
<span class="line"><span>2020/06/16 16:25:19 [I] [service.go:282] [34gd169d91sffsa6] login to server success, get run id [34gd169d91sffsa6], server udp port [0]</span></span>
<span class="line"><span>2020/06/16 16:25:19 [I] [proxy_manager.go:144] [34gd169d91sffsa6] proxy added: [RDP]</span></span>
<span class="line"><span>2020/06/16 16:25:19 [I] [control.go:179] [34gd169d91sffsa6] [RDP] start proxy success</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>记住末尾的 <strong><code>start proxy success</code></strong> 出现这个字样，代表已经启动成功，如果不是这个，就要检查是否配置文件错误，是否与远程服务器连接不通畅。</p><h3 id="_3-开机自启" tabindex="-1"><a class="header-anchor" href="#_3-开机自启"><span><strong>3.开机自启</strong></span></a></h3><p>关于 Windows 客户端如何开机自启，网上也有很多方式，什么脚本啊、注册服务啊，多不胜数，这里我介绍一种使用非常简单的方式，纯粹的可视化图形交互界面，简单几步就能将程序注册为系统服务。</p><h4 id="_1-下载软件不提供了" tabindex="-1"><a class="header-anchor" href="#_1-下载软件不提供了"><span>（1）<s>下载软件</s>不提供了</span></a></h4><p><s>下载地址：<a href="https://cloud.189.cn/t/ieiUFv7fEJB3" target="_blank" rel="noopener noreferrer"><strong>SrvanyUI</strong></a> 访问码：<strong>wl5f</strong></s> 失效了哦！</p><p><em><strong>Srvany</strong></em> 是微软套件的一个小工具,可以手动将程序或其他可执行文件注册为系统服务。但是操作涉及到注册表操作，使用颇为不便。而 <em><strong>SrvanyUI</strong></em> 是一位大神，封装简化的可视化工具，将原本繁琐的操作，点击几下键盘就能完成。具体下载请参考<a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><strong>参考资料</strong></a>。</p><p>下载完成后，将程序放在一个比较顺手的文件夹，</p><h4 id="_2-创建服务" tabindex="-1"><a class="header-anchor" href="#_2-创建服务"><span>(2) 创建服务</span></a></h4><p>打开 <em><strong>SrvanyUI</strong></em> ，截图如下：</p><figure><img src="https://img-cdn.icecome.com/image/frp/20240828_103727.png" alt="SrvanyUI*" tabindex="0" loading="lazy"><figcaption>SrvanyUI*</figcaption></figure><p>选择左上角工具栏第一个绿色的 <strong>+</strong> 号，开始添加服务，如下图所示，依次选择自建服务，填写完整 <strong>名称</strong> ，<strong>选项</strong> 等内容，然后点击确定，开始使用吧！</p><figure><img src="https://img-cdn.icecome.com/image/frp/20240828_103742.png" alt="软件设置窗口" tabindex="0" loading="lazy"><figcaption>软件设置窗口</figcaption></figure><p>大功告成！此时，按下 <strong><code>win</code></strong> + <strong><code>x</code></strong> ，点击 <strong>计算机管理</strong> ，打开 <strong>服务和程序</strong> -&gt; <strong>服务</strong> ，看看 FRP 服务是否已经存在并启动了呢！</p><figure><img src="https://img-cdn.icecome.com/image/frp/20240828_103750.png" alt="系统服务" tabindex="0" loading="lazy"><figcaption>系统服务</figcaption></figure><h1 id="结尾" tabindex="-1"><a class="header-anchor" href="#结尾"><span><strong>结尾</strong></span></a></h1><p>至此，所有步骤都已完成。<br> 在其他电脑使用 <strong><code>win</code></strong> + <strong><code>r</code></strong> 弹出运行窗口，输入 <strong>mstsc</strong> 并确定，打开远程桌面连接，输入你设定的 <strong>域名</strong> : <strong>端口</strong>，如 <strong><a href="http://frp.xxx.com:7001" target="_blank" rel="noopener noreferrer">frp.xxx.com:7001</a></strong> ，账户和密码就是你设置的这台被远程客户端的登录账户和密码，连接远程桌面看看吧。</p><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span><strong>参考资料</strong></span></a></h1><blockquote><ul><li>Github 官方说明：<a href="https://github.com/fatedier/frp/blob/master/README_zh.md" target="_blank" rel="noopener noreferrer">https://github.com/fatedier/frp/blob/master/README_zh.md</a></li><li>frp 官方中文文档：<a href="https://gofrp.org/zh-cn/docs/overview/" target="_blank" rel="noopener noreferrer">https://gofrp.org/zh-cn/docs/overview/</a></li><li>Frp 内网穿透工具的搭建和使用方法：<a href="https://code.skyheng.com/post/52586.html" target="_blank" rel="noopener noreferrer">https://code.skyheng.com/post/52586.html</a></li><li>使用 FRP 反向代理实现 Windows 远程连接：<a href="https://www.cnblogs.com/zhanggaoxing/p/9221705.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/zhanggaoxing/p/9221705.html</a></li><li>用开源免费的内网穿透工具 frp，实现远程桌面和文件传输 - 少数派：<a href="https://sspai.com/post/60852" target="_blank" rel="noopener noreferrer">https://sspai.com/post/60852</a></li><li>FRP 内网穿透 Windows 远程桌面：<a href="https://www.cnblogs.com/ingxx/p/12255241.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/ingxx/p/12255241.html</a></li><li>SrvanyUI 服务管理工具发布：<a href="https://wangye.org/blog/archives/644/" target="_blank" rel="noopener noreferrer">https://wangye.org/blog/archives/644/</a></li></ul></blockquote>`,91))])}const m=e(t,[["render",o],["__file","Frp内网穿透.html.vue"]]),u=JSON.parse('{"path":"/learn/play/nas/Frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html","title":"记录一次动手实践 之 搭建FRP穿透服务，实现远程桌面","lang":"zh-CN","frontmatter":{"title":"记录一次动手实践 之 搭建FRP穿透服务，实现远程桌面","date":"2020-06-16T20:00:00.000Z","author":"都将焉予","cover":null,"icon":"carbon:server-proxy","order":0,"category":["学习"],"tags":["动手实践","NAS"],"toc":true,"article":true,"star":false,"sticky":false,"editLink":false,"pageview":false,"lastUpdated":false,"description":"前序 自从建了这个主页，一直没想好写什么东西，正巧碰上远程连接软件 Team Viewer 无法使用的情况， 在对比了多个远程连接软件后，选择了 Frp 作为解决我目前困境的一个方式的同时，也想记录下本次搭建的过程。","head":[["meta",{"property":"og:url","content":"https://blog.icecome.com/learn/play/nas/Frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html"}],["meta",{"property":"og:site_name","content":"三无亦拾吾"}],["meta",{"property":"og:title","content":"记录一次动手实践 之 搭建FRP穿透服务，实现远程桌面"}],["meta",{"property":"og:description","content":"前序 自从建了这个主页，一直没想好写什么东西，正巧碰上远程连接软件 Team Viewer 无法使用的情况， 在对比了多个远程连接软件后，选择了 Frp 作为解决我目前困境的一个方式的同时，也想记录下本次搭建的过程。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://img-cdn.icecome.com/image/frp/20240827\\\\_175633.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-09T07:43:26.000Z"}],["meta",{"property":"article:author","content":"都将焉予"}],["meta",{"property":"article:tag","content":"动手实践"}],["meta",{"property":"article:tag","content":"NAS"}],["meta",{"property":"article:published_time","content":"2020-06-16T20:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-09T07:43:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"记录一次动手实践 之 搭建FRP穿透服务，实现远程桌面\\",\\"image\\":[\\"https://img-cdn.icecome.com/image/frp/20240827\\\\\\\\_175633.png\\",\\"https://img-cdn.icecome.com/image/frp/20240828\\\\\\\\_103727.png\\",\\"https://img-cdn.icecome.com/image/frp/20240828\\\\\\\\_103742.png\\",\\"https://img-cdn.icecome.com/image/frp/20240828\\\\\\\\_103750.png\\"],\\"datePublished\\":\\"2020-06-16T20:00:00.000Z\\",\\"dateModified\\":\\"2024-10-09T07:43:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"都将焉予\\"}]}"]]},"headers":[{"level":2,"title":"服务器端","slug":"服务器端","link":"#服务器端","children":[{"level":3,"title":"1.下载程序","slug":"_1-下载程序","link":"#_1-下载程序","children":[]},{"level":3,"title":"2.配置程序","slug":"_2-配置程序","link":"#_2-配置程序","children":[]},{"level":3,"title":"3.后台运行和开机自启","slug":"_3-后台运行和开机自启","link":"#_3-后台运行和开机自启","children":[]},{"level":3,"title":"题外话","slug":"题外话","link":"#题外话","children":[]}]},{"level":2,"title":"客户端配置","slug":"客户端配置","link":"#客户端配置","children":[{"level":3,"title":"1.书写配置","slug":"_1-书写配置","link":"#_1-书写配置","children":[]},{"level":3,"title":"2.合并配置","slug":"_2-合并配置","link":"#_2-合并配置","children":[]},{"level":3,"title":"3.开机自启","slug":"_3-开机自启","link":"#_3-开机自启","children":[]}]}],"git":{"createdTime":1728459806000,"updatedTime":1728459806000,"contributors":[{"name":"icecome","email":"werrice@outlook.com","commits":1}]},"readingTime":{"minutes":11.45,"words":3436},"filePathRelative":"learn/play/nas/Frp内网穿透.md","localizedDate":"2020年6月16日","excerpt":"<br>\\n<h1>前序</h1>\\n<p>自从建了这个主页，一直没想好写什么东西，正巧碰上远程连接软件 <strong>Team Viewer</strong> 无法使用的情况， 在对比了多个远程连接软件后，选择了 <strong>Frp</strong> 作为解决我目前困境的一个方式的同时，也想记录下本次搭建的过程。</p>\\n","autoDesc":true}');export{m as comp,u as data};
